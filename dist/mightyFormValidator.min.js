"function"!=typeof Object.create&&(Object.create=function(e){"use strict";function t(){}return t.prototype=e,new t});var eventsNamespaceBinder={on:function(e,t,a){"use strict";this.namespaces||(this.namespaces={}),this.namespaces[e]=t;a=a||!1;return this.addEventListener(e.split(".")[0],t,a),this},off:function(e){"use strict";if(void 0!==this.namespaces)if(void 0===e.split(".")[1])for(var t in this.namespaces)t.split(".")[0]===e&&(this.removeEventListener(e,this.namespaces[t]),delete this.namespaces[t]);else this.namespaces.hasOwnProperty(e)&&(this.removeEventListener(e.split(".")[0],this.namespaces[e]),delete this.namespaces[e]);return this}};window.on=Element.prototype.on=eventsNamespaceBinder.on,window.off=Element.prototype.off=eventsNamespaceBinder.off;var mightyFormValidator=function(){"use strict";var r={initialRun:!1,initialRunTimeout:10,parentSelector:!1,classes:{passed:"validation-passed",failed:"validation-failed"},debug:!1},d={log:function(e){!0===r.debug&&console.log(e)},getAncestor:function(e,t){switch(t.charAt(0)){case"#":for(t=t.substr(1);(e=e.parentElement)&&e.id!==t;);break;case".":for(t=t.substr(1);(e=e.parentElement)&&!e.classList.contains(t););break;default:for(t=t.toUpperCase();(e=e.parentElement)&&e.tagName!==t;);}return e}},u={add:function(e,t){return d.log("Function: validators.add()"),("string"==typeof e||e instanceof String)&&2<e.length&&"default"!==e&&"general"!==e?e in u.validator?(d.log("FAIL: Duplicated validator name"),!1):"object"!=typeof t||"function"!=typeof t.validate?(d.log("FAIL: invalid validator object or validate() function is missing"),!1):(d.log("SUCCESS: Validator with name `"+e+"` added"),void(u.validator[e]=t)):(d.log("FAIL: invalid validator name"),!1)},validator:{notempty:{validate:function(e){d.log("Function: notempty.validate()");var t,a=e.value,n=e.type;return d.log("Input type: "+n),["checkbox","radio"].includes(n)?"checkbox"===n?(d.log("Checkbox validation"),t=!!e.checked):d.log("Radio validation not yet available"):(d.log("Regular validation"),t=0<a.trim().length),t}}}},o={bind:function(a,n){d.log("Function: events.bind for field");var i=v.getValidatorOptions(a);n=null==n?[]:n,d.log(n),d.log(i),a.addEventListener("blur",function(){o.onChange(a,n,i)},!1),a.addEventListener("change",function(){o.onChange(a,n,i)},!1),void 0!==i.general&&"undefined"!==i.general.keyUp&&0<i.general.keyUp&&i.general.keyUp<=2&&a.addEventListener("keyup",function(e){var t=!1;(void 0!==e.key&&"Tab"===e.key||void 0!==e.code&&"Tab"===e.code||void 0!==e.keyCode&&9===e.keyCode)&&(t=!0),"keyup"===e.type&&!0!==t&&o.onKeyUp(a,n,i,e)},!1),!0===r.initialRun&&v.validateInput(a,n)},onChange:function(e,t,a){var n;d.log("Function: events.onchange"),a=void 0===a?v.getValidatorOptions(e):a,v.validateInput(e,t),d.log("Check for trigger validation"),d.log(a),void 0!==a.general&&void 0!==a.general.triggerValidation&&""!==a.general.triggerValidation.trim()&&(a=a.general.triggerValidation.trim(),d.log("Trigger validation of other field: #"+a),null!=(n=document.getElementById(a))&&setTimeout(function(){v.validateInput(n)},50))},onKeyUp:function(e,t,a,n){d.log("Function: events.onkeyup"),a=void 0===a?v.getValidatorOptions(e):a,d.log(a),void 0!==a.general&&"undefined"!==a.general.keyUp&&0<a.general.keyUp&&a.general.keyUp<=2&&v.validateInput(e,t,n)}},v={getValidators:function(e){d.log("Function: validation.getValidators()");var e=e.dataset.validators,t=[],a=[];void 0!==e&&0<e.length&&(0<=e.indexOf(",")?t=e.trim().split(","):t.push(e.trim())),d.log("List found validators:"),d.log(t);for(var n=0;n<t.length;n++)a.push(t[n].trim());return t=a,a=[],t},getValidatorOptions:function(e){var t={};return t="validatorOptions"in e.dataset&&""!==e.dataset.validatorOptions.trim()&&void 0===(t=JSON.parse(e.dataset.validatorOptions.trim()))?{}:t},getErrorMessage:function(e){var t="";return t="errortext"in e.dataset?e.dataset.errormessage:t},setErrorText:function(e,t){return("string"==typeof t||t instanceof String)&&(e.dataset.errortext=t),t},updateInput:function(e,t){d.log("Function: validation.updateInput()");var a,n="",i=e.parentElement;!1===r.parentSelector||null!==(a=d.getAncestor(e,r.parentSelector))&&(i=a);var o=i.querySelector(".message-error");!0===t?(d.log("Update valid"),i.classList.remove(r.classes.failed),i.classList.add(r.classes.passed),null!==o&&o.remove()):!1===t?(d.log("Update invalid"),i.classList.remove(r.classes.passed),i.classList.add(r.classes.failed),n=v.getErrorMessage(e)):(d.log("Update undefined (not valid and not invalid)"),i.classList.remove(r.classes.failed),i.classList.remove(r.classes.passed),null!==o&&o.remove()),n&&0<n.length&&!1===t&&setTimeout(function(){null!==(o=i.querySelector(".message-error"))&&o.remove(),(o=document.createElement("span")).classList.add("message-error"),o.classList.add("message-error--validation"),o.innerText=n,i.appendChild(o)},100)},validateInput:function(e,t,a){var n,i,o=!1,r=!1;if(a=void 0===a?null:a,d.log("Function: validation.validateInput()"),null==t&&(t=v.getValidators(e)),i=v.getValidatorOptions(e),null!==a&&void 0!==a.type&&"keyup"===a.type&&void 0!==i.general&&"undefined"!==i.general.keyUp&&1===i.general.keyUp&&(r=!0),!e.hasAttribute("hidden")&&!e.hasAttribute("disabled")){if(void 0!==n&&!0!==n||!(e.hasAttribute("required")||0<=t.indexOf("notempty")||"validateRequired"in e.dataset)||(d.log("Validate not empty or required"),a={},void 0!==i.notempty&&(a=i.notempty),o=!0,n=u.validator.notempty.validate(e,a),d.log(n),!0!==n&&void 0!==a.errorText&&""!==a.errorText.trim()&&v.setErrorText(e,a.errorText.trim())),!0===o&&!0===n||!0!==o&&""!==e.value){d.log("Loop through validators");for(var l,s=0;s<t.length;s++)"notempty"!==t[s]&&(void 0===n||!0===n)&&t[s]in u.validator&&(d.log("Validate: "+t[s]),l={},void 0!==i[t[s]]&&(l=i[t[s]]),n=u.validator[t[s]].validate(e,l),d.log(n),!0!==n&&void 0!==l.errorText&&""!==l.errorText.trim()&&v.setErrorText(e,l.errorText.trim()))}!0===r?!0===n&&(d.log("Update dom (only on valid)"),v.updateInput(e,n)):(d.log("Update dom (regular)"),v.updateInput(e,n))}},enableInput:function(e){var t;d.log("Function: validation.enableInput()"),"validators"in e.dataset&&(t=v.getValidators(e),d.log(t),0<t.length&&o.bind(e,t))},enableForm:function(e){d.log("Function: validation.enableForm()");var t=e.getElementsByClassName("mfvField"),a=!1,n={};if(void 0!==(n="validatorOptions"in e.dataset&&""!==e.dataset.validatorOptions.trim()?JSON.parse(e.dataset.validatorOptions.trim()):n).debug&&!0===n.debug?r.debug=!0:r.debug=!1,void 0!==n.initialRun&&!0===n.initialRun&&(a=!0),void 0!==n.classes)for(var i in d.log(n.classes),r.classes)"string"==typeof n.classes[i]&&0<n.classes[i].trim().length&&(r.classes[i]=n.classes[i].trim());if(void 0!==n.parentSelector&&0<n.parentSelector.trim().length&&(r.parentSelector=n.parentSelector.trim()),d.log(r),null!==t&&0<t.length){for(var o=0;o<t.length;o++)v.enableInput(t[o]);!0===a&&setTimeout(function(){for(var e=0;e<t.length;e++)v.validateInput(t[e])},r.initialRunTimeout)}}};return{init:function(){d.log("Function: init"),d.log(r),d.log(u);var e=document.getElementsByClassName("mfvForm");if(null!==e&&0<e.length)for(var t=0;t<e.length;t++)v.enableForm(e[t])},validators:u,validation:v,utilities:d}}();"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?mightyFormValidator.init():document.addEventListener("DOMContentLoaded",mightyFormValidator.init());