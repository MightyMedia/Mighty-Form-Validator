"function"!=typeof Object.create&&(Object.create=function(t){"use strict";function e(){}return e.prototype=t,new e});var eventsNamespaceBinder={on:function(t,e,a){"use strict";this.namespaces||(this.namespaces={}),this.namespaces[t]=e;a=a||!1;return this.addEventListener(t.split(".")[0],e,a),this},off:function(t){"use strict";if(void 0!==this.namespaces)if(void 0===t.split(".")[1])for(var e in this.namespaces)e.split(".")[0]===t&&(this.removeEventListener(t,this.namespaces[e]),delete this.namespaces[e]);else this.namespaces.hasOwnProperty(t)&&(this.removeEventListener(t.split(".")[0],this.namespaces[t]),delete this.namespaces[t]);return this}};window.on=Element.prototype.on=eventsNamespaceBinder.on,window.off=Element.prototype.off=eventsNamespaceBinder.off;var mightyFormValidator=function(){"use strict";var r={initialRun:!1,initialRunTimeout:10,parentSelector:!1,classes:{passed:"validation-passed",failed:"validation-failed"},debug:!1},l={log:function(t){!0===r.debug&&console.log(t)},getAncestor:function(t,e){switch(e.charAt(0)){case"#":for(e=e.substr(1);(t=t.parentElement)&&t.id!==e;);break;case".":for(e=e.substr(1);(t=t.parentElement)&&!t.classList.contains(e););break;default:for(e=e.toUpperCase();(t=t.parentElement)&&t.tagName!==e;);}return t}},d={add:function(t,e){return l.log("Function: validators.add()"),("string"==typeof t||t instanceof String)&&2<t.length&&"default"!==t&&"general"!==t?t in d.validator?(l.log("FAIL: Duplicated validator name"),!1):"object"!=typeof e||"function"!=typeof e.validate?(l.log("FAIL: invalid validator object or validate() function is missing"),!1):(l.log("SUCCESS: Validator with name `"+t+"` added"),void(d.validator[t]=e)):(l.log("FAIL: invalid validator name"),!1)},validator:{notempty:{validate:function(t){l.log("Function: notempty.validate()");t=0<t.value.trim().length;return t}}}},a={bind:function(t,e){l.log("Function: events.bind for field"),null==e&&(e=[]),t.addEventListener("blur",function(){a.onChange(t,e)},!1),t.addEventListener("change",function(){a.onChange(t,e)},!1),!0===r.initialRun&&u.validateInput(t,e)},onChange:function(t,e){l.log("Function: events.onchange");var a,i=u.getValidatorOptions(t);u.validateInput(t,e),l.log("Check for trigger validation"),l.log(i),void 0!==i.general&&void 0!==i.general.triggerValidation&&""!==i.general.triggerValidation.trim()&&(i=i.general.triggerValidation.trim(),l.log("Trigger validation of other field: #"+i),null!=(a=document.getElementById(i))&&setTimeout(function(){u.validateInput(a)},50))}},u={getValidators:function(t){l.log("Function: validation.getValidators()");var t=t.dataset.validators,e=[],a=[];void 0!==t&&0<t.length&&(0<=t.indexOf(",")?e=t.trim().split(","):e.push(t.trim())),l.log("List found validators:"),l.log(e);for(var i=0;i<e.length;i++)a.push(e[i].trim());return e=a,a=[],e},getValidatorOptions:function(t){var e={};return"validatorOptions"in t.dataset&&""!==t.dataset.validatorOptions.trim()&&void 0===(e=JSON.parse(t.dataset.validatorOptions.trim()))&&(e={}),e},getErrorMessage:function(t){var e="";return"errortext"in t.dataset&&(e=t.dataset.errormessage),e},setErrorText:function(t,e){return("string"==typeof e||e instanceof String)&&(t.dataset.errortext=e),e},updateInput:function(t,e){l.log("Function: validation.updateInput()");var a,i="",n=t.parentElement;!1===r.parentSelector||null!==(a=l.getAncestor(t,r.parentSelector))&&(n=a);var o=n.querySelector(".message-error");!0===e?(l.log("Update valid"),n.classList.remove(r.classes.failed),n.classList.add(r.classes.passed),null!==o&&o.remove()):!1===e?(l.log("Update invalid"),n.classList.remove(r.classes.passed),n.classList.add(r.classes.failed),i=u.getErrorMessage(t)):(l.log("Update undefined (not valid and not invalid)"),n.classList.remove(r.classes.failed),n.classList.remove(r.classes.passed),null!==o&&o.remove()),i&&0<i.length&&!1===e&&setTimeout(function(){null!==(o=n.querySelector(".message-error"))&&o.remove(),(o=document.createElement("span")).classList.add("message-error"),o.classList.add("message-error--validation"),o.innerText=i,n.appendChild(o)},100)},validateInput:function(t,e){var a,i,n,o=!1;if(l.log("Function: validation.validateInput()"),null==e&&(e=u.getValidators(t)),i=u.getValidatorOptions(t),!t.hasAttribute("hidden")&&!t.hasAttribute("disabled")){if(void 0!==a&&!0!==a||!(t.hasAttribute("required")||0<=e.indexOf("notempty")||"validateRequired"in t.dataset)||(l.log("Validate not empty or required"),n={},void 0!==i.notempty&&(n=i.notempty),o=!0,a=d.validator.notempty.validate(t,n),l.log(a),!0!==a&&void 0!==n.errorText&&""!==n.errorText.trim()&&u.setErrorText(t,n.errorText.trim())),!0===o&&!0===a||!0!==o&&""!==t.value){l.log("Loop through validators");for(var r,s=0;s<e.length;s++){"notempty"!==e[s]&&(void 0===a||!0===a)&&e[s]in d.validator&&(l.log("Validate: "+e[s]),r={},void 0!==i[e[s]]&&(r=i[e[s]]),a=d.validator[e[s]].validate(t,r),l.log(a),!0!==a&&void 0!==r.errorText&&""!==r.errorText.trim()&&u.setErrorText(t,r.errorText.trim()))}}l.log("Update dom"),u.updateInput(t,a)}},enableInput:function(t){var e;l.log("Function: validation.enableInput()"),"validators"in t.dataset&&(e=u.getValidators(t),l.log(e),0<e.length&&a.bind(t,e))},enableForm:function(t){l.log("Function: validation.enableForm()");var e=t.getElementsByClassName("mfvField"),a=!1,i={};if("validatorOptions"in t.dataset&&""!==t.dataset.validatorOptions.trim()&&(i=JSON.parse(t.dataset.validatorOptions.trim())),void 0!==i.debug&&!0===i.debug?r.debug=!0:r.debug=!1,void 0!==i.initialRun&&!0===i.initialRun&&(a=!0),void 0!==i.classes)for(var n in l.log(i.classes),r.classes)"string"==typeof i.classes[n]&&0<i.classes[n].trim().length&&(r.classes[n]=i.classes[n].trim());if(void 0!==i.parentSelector&&0<i.parentSelector.trim().length&&(r.parentSelector=i.parentSelector.trim()),l.log(r),null!==e&&0<e.length){for(var o=0;o<e.length;o++)u.enableInput(e[o]);!0===a&&setTimeout(function(){for(var t=0;t<e.length;t++)u.validateInput(e[t])},r.initialRunTimeout)}}};return{init:function(){l.log("Function: init"),l.log(r),l.log(d);var t=document.getElementsByClassName("mfvForm");if(null!==t&&0<t.length)for(var e=0;e<t.length;e++)u.enableForm(t[e])},validators:d,utilities:l}}();"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?mightyFormValidator.init():document.addEventListener("DOMContentLoaded",mightyFormValidator.init());