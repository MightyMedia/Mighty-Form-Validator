"function"!=typeof Object.create&&(Object.create=function(t){"use strict";function e(){}return e.prototype=t,new e});var eventsNamespaceBinder={on:function(t,e,a){"use strict";this.namespaces||(this.namespaces={}),this.namespaces[t]=e;a=a||!1;return this.addEventListener(t.split(".")[0],e,a),this},off:function(t){"use strict";if(void 0!==this.namespaces)if(void 0===t.split(".")[1])for(var e in this.namespaces)e.split(".")[0]===t&&(this.removeEventListener(t,this.namespaces[e]),delete this.namespaces[e]);else this.namespaces.hasOwnProperty(t)&&(this.removeEventListener(t.split(".")[0],this.namespaces[t]),delete this.namespaces[t]);return this}};window.on=Element.prototype.on=eventsNamespaceBinder.on,window.off=Element.prototype.off=eventsNamespaceBinder.off;var mightyFormValidator=function(){"use strict";var r={validateSubmission:!1,initialRun:!1,initialRunTimeout:20,parentSelector:!1,classes:{passed:"validation-passed",failed:"validation-failed"},formClasses:{passed:"validation-passed",failed:"validation-failed"},debug:!1,validationStatus:{valid:"valid",invalid:"invalid",initial:"initial"}},d={log:function(t){!0===r.debug&&console.log(t)},getAncestor:function(t,e){switch(e.charAt(0)){case"#":for(e=e.substr(1);(t=t.parentElement)&&t.id!==e;);break;case".":for(e=e.substr(1);(t=t.parentElement)&&!t.classList.contains(e););break;default:for(e=e.toUpperCase();(t=t.parentElement)&&t.tagName!==e;);}return t},getElement:function(t){var e;switch(t.charAt(0)){case"#":t=t.substr(1),e=document.getElementById(t);break;case".":t=t.substr(1),e=document.getElementsByClassName(t);break;default:t=t.toUpperCase(),e=document.getElementsByTagName(t)}return e}},u={add:function(t,e){return d.log("Function: validators.add()"),("string"==typeof t||t instanceof String)&&2<t.length&&"default"!==t&&"general"!==t?t in u.validator?(d.log("FAIL: Duplicated validator name"),!1):"object"!=typeof e||"function"!=typeof e.validate?(d.log("FAIL: invalid validator object or validate() function is missing"),!1):(d.log("SUCCESS: Validator with name `"+t+"` added"),void(u.validator[t]=e)):(d.log("FAIL: invalid validator name"),!1)},validator:{notempty:{validate:function(t){d.log("Function: notempty.validate()");var e,a=t.value,i=t.type;return d.log("Input type: "+i),["checkbox","radio"].includes(i)?"checkbox"===i?(d.log("Checkbox validation"),e=!!t.checked):d.log("Radio validation not yet available"):(d.log("Regular validation"),e=0<a.trim().length),e}}}},l={bind:function(a,i,n){d.log("Function: events.bind for field");var o=v.getValidatorOptions(a);i=null==i?[]:i,d.log(i),d.log(o),a.on("blur.mfvBlur",function(t){l.onChange(a,i,o,t,n)},!1),a.on("change.mfvChange",function(t){l.onChange(a,i,o,t,n)},!1),void 0!==o.general&&"undefined"!==o.general.keyUp&&0<o.general.keyUp&&o.general.keyUp<=2&&a.on("keyup.mfvKeyup",function(t){var e=!1;(void 0!==t.key&&"Tab"===t.key||void 0!==t.code&&"Tab"===t.code||void 0!==t.keyCode&&9===t.keyCode)&&(e=!0),"keyup"===t.type&&!0!==e&&l.onKeyUp(a,i,o,t,n)},!1),!0===r.initialRun&&v.validateInput(a,i,null,n)},onChange:function(t,e,a,i,n){var o;d.log("Function: events.onchange"),a=void 0===a?v.getValidatorOptions(t):a,v.validateInput(t,e,i,n),d.log("Check for trigger validation"),d.log(a),void 0!==a.general&&void 0!==a.general.triggerValidation&&""!==a.general.triggerValidation.trim()&&(a=a.general.triggerValidation.trim(),d.log("Trigger validation of other field: #"+a),null!=(o=document.getElementById(a))&&setTimeout(function(){v.validateInput(o,null,null,n)},50))},onKeyUp:function(t,e,a,i,n){d.log("Function: events.onkeyup"),a=void 0===a?v.getValidatorOptions(t):a,d.log(a),void 0!==a.general&&"undefined"!==a.general.keyUp&&0<a.general.keyUp&&a.general.keyUp<=2&&v.validateInput(t,e,i,n)}},v={getValidators:function(t){d.log("Function: validation.getValidators()");var t=t.dataset.validators,e=[],a=[];void 0!==t&&0<t.length&&(0<=t.indexOf(",")?e=t.trim().split(","):e.push(t.trim())),d.log("List found validators:"),d.log(e);for(var i=0;i<e.length;i++)a.push(e[i].trim());return e=a,a=[],e},getValidatorOptions:function(t){var e={};return e="validatorOptions"in t.dataset&&""!==t.dataset.validatorOptions.trim()&&void 0===(e=JSON.parse(t.dataset.validatorOptions.trim()))?{}:e},getErrorMessage:function(t){var e="";return e="errortext"in t.dataset?t.dataset.errormessage:e},setErrorText:function(t,e){return("string"==typeof e||e instanceof String)&&(t.dataset.errortext=e),e},updateInput:function(t,e){d.log("Function: validation.updateInput()");var a,i="",n=t.parentElement;!1===r.parentSelector||null!==(a=d.getAncestor(t,r.parentSelector))&&(n=a);var o=n.querySelector(".message-error");!0===e?(d.log("Update valid"),t.dataset.validationStatus=r.validationStatus.valid,n.classList.remove(r.classes.failed),n.classList.add(r.classes.passed),null!==o&&o.remove()):!1===e?(d.log("Update invalid"),t.dataset.validationStatus=r.validationStatus.invalid,n.classList.remove(r.classes.passed),n.classList.add(r.classes.failed),i=v.getErrorMessage(t)):(d.log("Update undefined (not valid and not invalid)"),t.dataset.validationStatus=r.validationStatus.initial,n.classList.remove(r.classes.failed),n.classList.remove(r.classes.passed),null!==o&&o.remove()),i&&0<i.length&&!1===e&&setTimeout(function(){null!==(o=n.querySelector(".message-error"))&&o.remove(),(o=document.createElement("span")).classList.add("message-error"),o.classList.add("message-error--validation"),o.innerText=i,n.appendChild(o)},100)},updateForm:function(t,e){d.log("Function: validation.updateForm()"),!0===e?(d.log("Update form valid"),t.dataset.validationStatus=r.validationStatus.valid,t.classList.remove(r.formClasses.failed),t.classList.add(r.formClasses.passed)):!1===e?(d.log("Update form invalid"),t.dataset.validationStatus=r.validationStatus.invalid,t.classList.remove(r.formClasses.passed),t.classList.add(r.formClasses.failed)):(d.log("Update form undefined (not valid and not invalid)"),t.classList.remove(r.formClasses.failed),t.classList.remove(r.formClasses.passed))},validateInput:function(t,e,a){var i,n,o=!1,l=!1;if(a=void 0===a?null:a,d.log("Function: validation.validateInput()"),null==e&&(e=v.getValidators(t)),n=v.getValidatorOptions(t),null!==a&&void 0!==a.type&&"keyup"===a.type&&void 0!==n.general&&"undefined"!==n.general.keyUp&&1===n.general.keyUp&&(l=!0),!t.hasAttribute("hidden")&&!t.hasAttribute("disabled")){if(void 0!==i&&!0!==i||!(t.hasAttribute("required")||0<=e.indexOf("notempty")||"validateRequired"in t.dataset)||(d.log("Validate not empty or required"),a={},void 0!==n.notempty&&(a=n.notempty),o=!0,i=u.validator.notempty.validate(t,a),d.log(i),!0!==i&&void 0!==a.errorText&&""!==a.errorText.trim()&&v.setErrorText(t,a.errorText.trim())),!0===o&&!0===i||!0!==o&&""!==t.value){d.log("Loop through validators");for(var s,r=0;r<e.length;r++)"notempty"!==e[r]&&(void 0===i||!0===i)&&e[r]in u.validator&&(d.log("Validate: "+e[r]),s={},void 0!==n[e[r]]&&(s=n[e[r]]),i=u.validator[e[r]].validate(t,s),d.log(i),!0!==i&&void 0!==s.errorText&&""!==s.errorText.trim()&&v.setErrorText(t,s.errorText.trim()))}return!0!==l?(d.log("Update dom (regular)"),v.updateInput(t,i),i):!1!==i?(d.log("Update dom (only on valid)"),v.updateInput(t,i),i):void 0}},validateForm:function(t,e){if(d.log("Function: validation.validateForm()"),null!=t&&(t.dataset.validationStatus=r.validationStatus.initial,null!==(e=null==e||e.length<1?t.getElementsByClassName("mfvField"):e)&&0<e.length))for(var a=!0,i=0;i<e.length;i++){var n=v.validateInput(e[i],null,null,t);d.log("Field valid ("+i+"): "+n),!1===n&&(t.dataset.validationStatus=r.validationStatus.invalid,a=!1)}return v.updateForm(t,a),a},enableInput:function(t,e){var a;d.log("Function: validation.enableInput()"),"validators"in t.dataset&&(a=v.getValidators(t),d.log(a),t.dataset.validationStatus=r.validationStatus.initial,0<a.length&&l.bind(t,a,e))},enableForm:function(e){d.log("Function: validation.enableForm()");var a=e.getElementsByClassName("mfvField"),t=!1,i=!1,n={};if(void 0!==(n="validatorOptions"in e.dataset&&""!==e.dataset.validatorOptions.trim()?JSON.parse(e.dataset.validatorOptions.trim()):n).debug&&!0===n.debug?r.debug=!0:r.debug=!1,void 0!==n.initialRun&&!0===n.initialRun&&(t=!0),void 0!==n.validateSubmission&&!0===n.validateSubmission&&(i=!0),void 0!==n.classes)for(var o in d.log(n.classes),r.classes)"string"==typeof n.classes[o]&&0<n.classes[o].trim().length&&(r.classes[o]=n.classes[o].trim());if(void 0!==n.formClasses)for(var l in d.log(n.formClasses),r.formClasses)"string"==typeof n.formClasses[l]&&0<n.formClasses[l].trim().length&&(r.formClasses[l]=n.formClasses[l].trim());if(void 0!==n.parentSelector&&0<n.parentSelector.trim().length&&(r.parentSelector=n.parentSelector.trim()),d.log(r),e.dataset.validationStatus=r.validationStatus.initial,null!==a&&0<a.length){for(var s=0;s<a.length;s++)v.enableInput(a[s],e);!0===t&&setTimeout(function(){v.validateForm(e,a)},r.initialRunTimeout)}!0===i&&e.on("submit.mfvSubmit",function(t){t.preventDefault(),d.log("Enable form validation on submit");t=v.validateForm(e,a);return!0===t?(d.log("Form is valid"),e.submit()):!1===t?d.log("Form is invalid"):(d.log("Form is unvalidated"),e.submit()),t})}};return{init:function(){d.log("Function: init"),d.log(r),d.log(u);var t=document.getElementsByClassName("mfvForm");if(null!==t&&0<t.length)for(var e=0;e<t.length;e++)v.enableForm(t[e])},validators:u,validation:v,validateForm:function(t){var e;if("object"==typeof t)if(t instanceof HTMLCollection||t instanceof NodeList)for(var a=0;a<t.length;a++)e=v.validateForm(t[a]);else e=v.validateForm(t);else if("string"==typeof t){var i=d.getElement(t);if(i instanceof HTMLCollection||i instanceof NodeList)for(var n=0;n<i.length;n++)e=v.validateForm(i[n]);else e=v.validateForm(i)}return e},utilities:d}}();"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?mightyFormValidator.init():document.addEventListener("DOMContentLoaded",mightyFormValidator.init());