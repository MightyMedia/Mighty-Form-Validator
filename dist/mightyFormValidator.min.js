"function"!=typeof Object.create&&(Object.create=function(e){"use strict";function t(){}return t.prototype=e,new t});var eventsNamespaceBinder={on:function(e,t,a){"use strict";this.namespaces||(this.namespaces={}),this.namespaces[e]=t;a=a||!1;return this.addEventListener(e.split(".")[0],t,a),this},off:function(e){"use strict";if(void 0!==this.namespaces)if(void 0===e.split(".")[1])for(var t in this.namespaces)t.split(".")[0]===e&&(this.removeEventListener(e,this.namespaces[t]),delete this.namespaces[t]);else this.namespaces.hasOwnProperty(e)&&(this.removeEventListener(e.split(".")[0],this.namespaces[e]),delete this.namespaces[e]);return this}};window.on=Element.prototype.on=eventsNamespaceBinder.on,window.off=Element.prototype.off=eventsNamespaceBinder.off;var mightyFormValidator=function(){"use strict";var r={initialRun:!1,initialRunTimeout:10,parentSelector:!1,classes:{passed:"validation-passed",failed:"validation-failed"},debug:!1},l={log:function(e){!0===r.debug&&console.log(e)},getAncestor:function(e,t){switch(t.charAt(0)){case"#":for(t=t.substr(1);(e=e.parentElement)&&e.id!==t;);break;case".":for(t=t.substr(1);(e=e.parentElement)&&!e.classList.contains(t););break;default:for(t=t.toUpperCase();(e=e.parentElement)&&e.tagName!==t;);}return e}},d={add:function(e,t){return l.log("Function: validators.add()"),("string"==typeof e||e instanceof String)&&2<e.length&&"default"!==e&&"general"!==e?e in d.validator?(l.log("FAIL: Duplicated validator name"),!1):"object"!=typeof t||"function"!=typeof t.validate?(l.log("FAIL: invalid validator object or validate() function is missing"),!1):(l.log("SUCCESS: Validator with name `"+e+"` added"),void(d.validator[e]=t)):(l.log("FAIL: invalid validator name"),!1)},validator:{notempty:{validate:function(e){l.log("Function: notempty.validate()");e=0<e.value.trim().length;return e}}}},a={bind:function(e,t){l.log("Function: events.bind for field"),null==t&&(t=[]),e.addEventListener("blur",function(){a.onChange(e,t)},!1),e.addEventListener("change",function(){a.onChange(e,t)},!1),!0===r.initialRun&&u.validateInput(e,t)},onChange:function(e,t){l.log("Function: events.onchange");var a,n=u.getValidatorOptions(e);u.validateInput(e,t),l.log("Check for trigger validation"),l.log(n),void 0!==n.general&&void 0!==n.general.triggerValidation&&""!==n.general.triggerValidation.trim()&&(n=n.general.triggerValidation.trim(),l.log("Trigger validation of other field: #"+n),null!=(a=document.getElementById(n))&&setTimeout(function(){u.validateInput(a)},50))}},u={getValidators:function(e){l.log("Function: validation.getValidators()");var t=e.dataset.validators,e=[];return void 0!==t&&0<t.length&&(0<=t.indexOf(",")?e=t.split(","):e.push(t)),e},getValidatorOptions:function(e){var t={};return"validatorOptions"in e.dataset&&""!==e.dataset.validatorOptions.trim()&&void 0===(t=JSON.parse(e.dataset.validatorOptions.trim()))&&(t={}),t},getErrorMessage:function(e){var t="";return"errortext"in e.dataset&&(t=e.dataset.errormessage),t},setErrorText:function(e,t){return("string"==typeof t||t instanceof String)&&(e.dataset.errortext=t),t},updateInput:function(e,t){l.log("Function: validation.updateInput()");var a,n="",i=e.parentElement;!1===r.parentSelector||null!==(a=l.getAncestor(e,r.parentSelector))&&(i=a);var o=i.querySelector(".message-error");!0===t?(l.log("Update valid"),i.classList.remove(r.classes.failed),i.classList.add(r.classes.passed),null!==o&&o.remove()):!1===t?(l.log("Update invalid"),i.classList.remove(r.classes.passed),i.classList.add(r.classes.failed),n=u.getErrorMessage(e)):(l.log("Update undefined (not valid and not invalid)"),i.classList.remove(r.classes.failed),i.classList.remove(r.classes.passed),null!==o&&o.remove()),n&&0<n.length&&!1===t&&setTimeout(function(){null!==(o=i.querySelector(".message-error"))&&o.remove(),(o=document.createElement("span")).classList.add("message-error"),o.classList.add("message-error--validation"),o.innerText=n,i.appendChild(o)},100)},validateInput:function(e,t){var a,n,i,o=!1;if(l.log("Function: validation.validateInput()"),null==t&&(t=u.getValidators(e)),n=u.getValidatorOptions(e),!e.hasAttribute("hidden")&&!e.hasAttribute("disabled")){if(void 0!==a&&!0!==a||!(e.hasAttribute("required")||0<=t.indexOf("notempty")||"validateRequired"in e.dataset)||(l.log("Validate not empty or required"),i={},void 0!==n.notempty&&(i=n.notempty),o=!0,a=d.validator.notempty.validate(e,i),l.log(a),!0!==a&&void 0!==i.errorText&&""!==i.errorText.trim()&&u.setErrorText(e,i.errorText.trim())),!0===o&&!0===a||!0!==o&&""!==e.value){l.log("Loop through validators");for(var r,s=0;s<t.length;s++){"notempty"!==t[s]&&(void 0===a||!0===a)&&t[s]in d.validator&&(l.log("Validate: "+t[s]),r={},void 0!==n[t[s]]&&(r=n[t[s]]),a=d.validator[t[s]].validate(e,r),l.log(a),!0!==a&&void 0!==r.errorText&&""!==r.errorText.trim()&&u.setErrorText(e,r.errorText.trim()))}}l.log("Update dom"),u.updateInput(e,a)}},enableInput:function(e){var t;l.log("Function: validation.enableInput()"),"validators"in e.dataset&&(t=u.getValidators(e),l.log(t),0<t.length&&a.bind(e,t))},enableForm:function(e){l.log("Function: validation.enableForm()");var t=e.getElementsByClassName("mfvField"),a=!1,n={};if("validatorOptions"in e.dataset&&""!==e.dataset.validatorOptions.trim()&&(n=JSON.parse(e.dataset.validatorOptions.trim())),void 0!==n.debug&&!0===n.debug?r.debug=!0:r.debug=!1,void 0!==n.initialRun&&!0===n.initialRun&&(a=!0),void 0!==n.classes)for(var i in l.log(n.classes),r.classes)"string"==typeof n.classes[i]&&0<n.classes[i].trim().length&&(r.classes[i]=n.classes[i].trim());if(void 0!==n.parentSelector&&0<n.parentSelector.trim().length&&(r.parentSelector=n.parentSelector.trim()),l.log(r),null!==t&&0<t.length){for(var o=0;o<t.length;o++)u.enableInput(t[o]);!0===a&&setTimeout(function(){for(var e=0;e<t.length;e++)u.validateInput(t[e])},r.initialRunTimeout)}}};return{init:function(){l.log("Function: init"),l.log(r),l.log(d);var e=document.getElementsByClassName("mfvForm");if(null!==e&&0<e.length)for(var t=0;t<e.length;t++)u.enableForm(e[t])},validators:d,utilities:l}}();"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?mightyFormValidator.init():document.addEventListener("DOMContentLoaded",mightyFormValidator.init());